<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Scroll-Driven Card with Redbox Bounce/Pulse</title>
  <style>
    .glow-box {
  border: 2px solid red;
  border-radius: 12px;
  animation: glow 2s ease-in-out infinite, scalePulse 4s ease-in-out infinite;
}

@keyframes glow {
  0% {
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
  }
  100% {
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
  }
}

@keyframes scalePulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.03);
  }
}
    /* ----------------------------------------
       Basic setup: enough vertical scroll space
       ---------------------------------------- */
    #scroll-container {
      height: 200vh; /* Two screens’ worth of scrolling */
    }

    /* Pin the card in the center */
    #sticky-card {
      position: sticky;
      top: 50vh;
      transform: translateY(-50%);
      perspective: 600px;
    }

    /* Both slot‐1 and slot‐2 sit on top of each other */
    .card-content {
      position: absolute;
      inset: 0;
    }

    /* Card wrapper styling */
    #card {
      overflow: visible;
      height: 350px;            
      border-radius: 1rem;      
      background-image: url('lbox.png');
      background-size: cover;
      background-position: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    /* ←── Slot 1: NO transitions on these so they snap instantly ──→ */
    #slot-1 .anim1 {
      will-change: transform, opacity;
      transition: none;
    }

    /* ←── Slot 2 elements: we animate their translateY & opacity via JS, 
               but the REDBOX‐INNER will get its own CSS keyframe. ──→ */
    #slot-2 .anim2 {
      will-change: transform, opacity;
      transition: none; /* we drive transform/opacity manually */
    }

    /* REDBOX: outer container is positioned by JS (translateY). 
       Inner wrapper does the bounce/pulse. */
    #redbox {
      position: absolute;
      left: 50%;
      bottom: -70px;           /* start partly outside card */
      transform: translateX(-50%); 
      /* no transition here—JS will set transform/opacity per frame */
    }

    /* Inner wrapper around the <img> so we can scale it via CSS */
    #redbox-inner {
      display: inline-block;
      /* start at normal scale */
      transform-origin: 50% 50%;
      /* initially paused; only animate when .slot2-active is applied */
      animation: none;
    }

    /* ── Define the bounce+pulse keyframes ── */
    @keyframes bouncePulse {
      0% {
        transform: translateY(0px) scale(1);
      }
      25% {
        transform: translateY(-10px) scale(1.05);
      }
      50% {
        transform: translateY(0px) scale(1);
      }
      75% {
        transform: translateY(-5px) scale(1.02);
      }
      100% {
        transform: translateY(0px) scale(1);
      }
    }

    /* When Slot 2 is active (p2 > 0), add this class to #redbox-inner: */
    #redbox-inner.slot2-active {
      animation: bouncePulse 1.2s ease-in-out infinite;
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="scroll-container" class="relative">
    <!-- Pinned card wrapper -->
    <div id="sticky-card" class="w-full max-w-sm mx-auto">
      <div id="card" class="relative">

        <!-- ====== SLOT 1 ====== -->
        <div id="slot-1" class="card-content p-6">
          <!-- Slot 1 elements: give them class "anim1" -->
          <h2 id="h1"
              class="anim1 text-3xl font-bold text-white drop-shadow-lg absolute top-4 left-4">
            Team
          </h2>
          <div id="b1"
               class="anim1 absolute top-2 left-2 bg-blue-600 text-white px-2 py-1 rounded-full text-xs drop-shadow">
            John S.
          </div>
          <div id="b2"
               class="anim1 absolute bottom-2 right-2 bg-red-400 text-white px-2 py-1 rounded-full text-xs drop-shadow">
            Lilianna
          </div>
          <div id="a1"
               class="anim1 absolute top-12 left-20 w-0 h-0 border-l-6 border-r-6 border-b-6 border-transparent border-b-black rotate-45 drop-shadow">
          </div>
          <div id="a2"
               class="anim1 absolute bottom-12 right-20 w-0 h-0 border-l-6 border-r-6 border-t-6 border-transparent border-t-black rotate-45 drop-shadow">
          </div>
          <!-- “Collaborate” text: always visible in slot 1 -->
          <div class="absolute bottom-20 left-6">
            <h3 id="t1" class="text-lg font-semibold text-white drop-shadow">Collaborate</h3>
            <p id="p1" class="text-white text-sm drop-shadow">
              Enhance teamwork with powerful real-time collaboration features.
            </p>
          </div>
        </div>

        <!-- ====== SLOT 2 ====== -->
        <div id="slot-2" class="card-content p-6">
          <!-- Slot 2 elements: class "anim2" -->
          <div class="absolute top-4 left-4">
            <div id="b3"
                 class="anim2 bg-blue-500 text-white px-2 py-1 rounded-full text-xs drop-shadow">
              v1.2
            </div>
          </div>
          <!-- History icon -->
          <div class="absolute left-0 top-1/2 transform -translate-y-1/2">
            <div id="a3"
                 class="anim2 bg-blue-500 w-8 h-8 flex items-center justify-center rounded-full shadow-lg drop-shadow">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5 text-white">
                <path d="M24,46A22,22,0,1,1,46,24,22,22,0,0,1,24,46Z" fill="#38b1e7"/>
                <circle cx="24" cy="24" r="16" fill="#b7e3f6"/>
                <path d="M29.09,29.78a2,2,0,0,1-1.19-.39l-5.09-3.78A2,2,0,0,1,22,24V16a2,2,0,0,1,4,0v7l4.29,3.18A2,2,0,0,1,29.09,29.78Z" fill="#495660"/>
              </svg>
            </div>
          </div>
<!-- REDBOX SECTION -->
<div id="slot1"></div>
<div id="slot2">
<div id="yourRedBox" class="glow-box">
<img src="redbox.png" />
</div>
</div>
<!-- “Version History” text -->
<div class="absolute bottom-6 left-6">
<h3 id="t2" class="text-lg font-semibold text-white drop-shadow">Version History</h3>
<p id="p2" class="text-white text-sm drop-shadow">
 Track every edit effortlessly, and never lose a single change.
</p>
</div></div></div></div></div>
<script>
    (function() {
      const container = document.getElementById('scroll-container');
      const vh = window.innerHeight;
      const maxScroll = () => container.offsetHeight - vh;

      /* Slot 1 elements: all IDs in slot 1 except t1 & p1 (which stay static) */
      const slot1Els = ['h1','b1','b2','a1','a2']
        .map(id => document.getElementById(id));

      /* Slot 2 elements (except t2 & p2 which stay static) */
      const slot2Els = ['b3','a3','redbox']
        .map(id => document.getElementById(id));

      /* Redbox’s inner wrapper for adding/removing the bounce animation */
      const redboxInner = document.getElementById('redbox-inner');

      function update() {
        const scrollY = window.scrollY;
        const prog = Math.min(Math.max(scrollY / maxScroll(), 0), 1);
        const half = 0.5;

        /* p1 from 0 → 1 during 0%–50% scroll */
        const p1 = Math.min(Math.max((prog - 0) / half, 0), 1);
        /* p2 from 0 → 1 during 50%–100% scroll */
        const p2 = Math.min(Math.max((prog - half) / half, 0), 1);
        function moveToSlot1() {
  const slot1 = document.getElementById('slot1');
  const slot2 = document.getElementById('slot2');
  const content = document.getElementById('yourRedBox');

  slot1.appendChild(content); // move instantly
  content.classList.remove('glow-box'); // remove glow and animation
        }

        /* ── Slot 1 animations: fly up & fade out as p1→1; instantly visible when p1=0 ── */
        slot1Els.forEach(el => {
          if (p1 === 0) {
            // instantly snap into original place, fully opaque
            el.style.transform = 'translateY(0)';
            el.style.opacity   = '1';
          } else {
            // during [0..1], fly up by 100px and fade out
            el.style.transform = `translateY(${-100 * p1}px)`;
            el.style.opacity   = `${1 - p1}`;
          }
        });
        // t1 & p1 (static Slot 1 text) are either visible or hidden instantly
        document.getElementById('t1').style.opacity = (prog < 0.5 ? '1' : '0');
        document.getElementById('p1').style.opacity = (prog < 0.5 ? '1' : '0');

        /* ── Slot 2 animations: if p2>0, fade+fly in; if p2=0, hide instantly ── */
        slot2Els.forEach(el => {
          if (p2 === 0) {
            // instantly hide/off-screen
            el.style.transform = `translateY(-80px)`;
            el.style.opacity   = '0';
          } else {
            // fly in from -80px → 0 as p2→1, fade in from 0→1
            const translateY = -80 + 80 * p2;
            if (el.id === 'redbox') {
              // Keep horizontal centering for redbox; vertical is p2‐driven
              el.style.transform = `translateX(-50%) translateY(${translateY}px)`;
            } else {
              el.style.transform = `translateY(${translateY}px)`;
            }
            el.style.opacity = `${p2}`;
          }
        });
        // t2 & p2 (static Slot 2 text) snap on/off based on p2 threshold
        document.getElementById('t2').style.opacity = (prog >= 0.5 ? '1' : '0');
        document.getElementById('p2').style.opacity = (prog >= 0.5 ? '1' : '0');

        /* ── Toggle the bounce/pulse CSS animation on #redbox-inner ── */
        if (p2 > 0) {
          redboxInner.classList.add('slot2-active');
        } else {
          redboxInner.classList.remove('slot2-active');
        }
      }

      window.addEventListener('scroll', update);
      window.addEventListener('resize', update);
      update();
    })();
  </script>
</body>
</html>
