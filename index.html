<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scroll Card Animation</title>
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    background: #f2f2f2;
  }
  .container {
    height: 150vh; /* enough scroll space */
  }
  .card {
    position: sticky;
    top: 20vh;
    width: 90%; max-width: 400px;
    margin: 0 auto;
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    padding: 20px;
    transform-origin: center center;
    z-index: 1;
  }
  /* Behind the card: stacked layers */
  .stack {
    position: absolute;
    width: 100%; height: 100%;
    border-radius: 16px;
    background: white;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    top: 0; left: 0;
    z-index: -1;
    opacity: 0;
  }
  .layer1 { transform: translate(-20px, -20px); }
  .layer2 { transform: translate(-40px, -40px); }
  /* Design A: "Team" card with arrows and pills */
  .pill {
    position: absolute;
    padding: 8px 12px;
    border-radius: 16px;
    color: #fff;
    font-size: 14px;
  }
  .pill-left {
    background: #4e78eb;
    top: 10px; left: -10%;
  }
  .pill-right {
    background: #ff7f50;
    top: 10px; right: -10%;
  }
  .arrow {
    position: absolute;
    width: 0; height: 0;
    border: solid transparent;
    top: 15px;
  }
  .arrow-left {
    border-width: 8px 12px 8px 0;
    border-left-color: #000;
    left: 10%;
  }
  .arrow-right {
    border-width: 8px 0 8px 12px;
    border-right-color: #000;
    right: 10%;
  }
  .heading-a {
    font-size: 24px;
    text-align: center;
    margin: 60px 0 20px;
  }
  .collaborate h2 {
    font-size: 20px; margin: 10px 0 5px;
  }
  .collaborate p {
    font-size: 14px;
    color: #666;
    margin: 0;
  }
  /* Design B: "Project Report" card content */
  .design-b-content { opacity: 0; }
  .report-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .report-title {
    font-size: 20px;
    font-weight: bold;
  }
  .revisions-label {
    position: relative;
    font-size: 16px;
    color: #555;
    cursor: pointer;
  }
  .revisions-tooltip {
    position: absolute;
    top: 24px; left: 0;
    background: white;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    padding: 5px;
    width: 150px;
    opacity: 0;
  }
  .revisions-tooltip ul {
    list-style: none;
    padding: 0; margin: 0;
  }
  .revisions-tooltip li {
    display: flex;
    align-items: center;
    padding: 6px 0;
  }
  .avatar {
    width: 24px;
    height: 24px;
    background: #aaa;
    border-radius: 50%;
    margin-right: 8px;
    text-align: center;
    line-height: 24px;
    color: #fff;
    font-weight: bold;
    flex-shrink: 0;
  }
  .version-history h2 {
    font-size: 20px;
    margin: 20px 0 5px;
  }
  .version-history p {
    font-size: 14px;
    color: #666;
    margin: 0;
  }
</style>
</head>
<body>
<div class="container">
  <div class="card" id="card">
    <!-- Stacked layers behind -->
    <div class="stack layer2"></div>
    <div class="stack layer1"></div>
    <!-- Design A content -->
    <div class="design-a-content">
      <div class="pill pill-left">John S.</div>
      <div class="arrow arrow-left"></div>
      <div class="pill pill-right">Lillianna</div>
      <div class="arrow arrow-right"></div>
      <h1 class="heading-a">Team</h1>
      <div class="collaborate">
        <h2>Collaborate</h2>
        <p>Enhance teamwork with powerful real-time collaboration features.</p>
      </div>
    </div>
    <!-- Design B content -->
    <div class="design-b-content">
      <div class="report-header">
        <span class="report-title">Project Report v1.2</span>
        <span class="revisions-label">Revisions
          <div class="revisions-tooltip">
            <ul>
              <li><div class="avatar">FH</div><div><strong>Finn Hayes</strong><br><small>Today, 3:18 PM</small></div></li>
              <li><div class="avatar">ZQ</div><div><strong>Zoe Quinn</strong><br><small>Today, 1:59 PM</small></div></li>
              <li><div class="avatar">AN</div><div><strong>Ava Neal</strong><br><small>Yesterday, 2:55 PM</small></div></li>
            </ul>
          </div>
        </span>
      </div>
      <div class="version-history">
        <h2>Version History</h2>
        <p>Track every edit effortlessly, and never lose a single change.</p>
      </div>
    </div>
  </div>
</div>

<!-- Anime.js from CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script>
// On DOM load, set up the Anime.js timeline and scroll handler
document.addEventListener('DOMContentLoaded', function() {
  // Create timeline (no autoplay)
  var tl = anime.timeline({ autoplay: false });

  // Animate Design A elements out
  tl
   .add({ targets: '.pill-left',   translateX: [-10, -60], opacity: [1, 0], duration: 300 }, 0)
   .add({ targets: '.arrow-left',  translateX: [-10, -50], opacity: [1, 0], duration: 300 }, 0)
   .add({ targets: '.pill-right',  translateX: [10, 60],   opacity: [1, 0], duration: 300 }, 0)
   .add({ targets: '.arrow-right', translateX: [10, 50],   opacity: [1, 0], duration: 300 }, 0)
   .add({ targets: '.heading-a',   translateY: [0, -30],    opacity: [1, 0], duration: 300 }, 0)
   .add({ targets: '.collaborate', translateY: [0, 30],     opacity: [1, 0], duration: 300 }, 0)
   // Card transform (scale/rotate) to start stack effect
   .add({ targets: '.card', scale: [1, 0.95], rotate: ['0deg', '-3deg'], duration: 500 }, 300)
   // Reveal stacked layers behind the card
   .add({ targets: '.layer1', translateX: [-20, 0], translateY: [-20, 0], opacity: [0, 1], duration: 400 }, 300)
   .add({ targets: '.layer2', translateX: [-40, 0], translateY: [-40, 0], opacity: [0, 1], duration: 400 }, 400)
   // Fade/slide in Design B content
   .add({ targets: '.report-title', translateY: [-20, 0], opacity: [0, 1], duration: 300 }, 700)
   .add({ targets: '.revisions-label', opacity: [0, 1], duration: 300 }, 700)
   .add({ targets: '.revisions-tooltip', translateY: [-10, 0], opacity: [0, 1], duration: 300, delay: 200 }, 700)
   .add({ targets: '.version-history h2', translateY: [20, 0], opacity: [0, 1], duration: 300 }, 800)
   .add({ targets: '.version-history p',  translateY: [20, 0], opacity: [0, 1], duration: 300 }, 800);

  // Calculate scroll range
  var container = document.querySelector('.container');
  var start = container.offsetTop;
  var end   = start + container.offsetHeight - window.innerHeight;

  // On scroll, map scrollY -> timeline progress
  window.addEventListener('scroll', function() {
    var scrollY = window.scrollY;
    var progress = (scrollY - start) / (end - start);
    progress = Math.max(0, Math.min(1, progress));
    tl.seek(tl.duration * progress);
  });
});
</script>
</body>
</html>
